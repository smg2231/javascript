<!DOCTYPE html>
<html>
<head>
  <title>People List</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <h1>People List</h1>
  <input id="firstName" placeholder="First Name">
  <input id="age" placeholder="Age">
  <button id="addBtn">Add</button>

  <table border="1">
    <thead>
      <tr><th>Name</th><th>Age</th></tr>
    </thead>
    <tbody id="peopleTable"></tbody>
  </table>

  <script>
    // ðŸ‘‡ Tell your frontend where the backend lives
    const API_BASE = 'http://localhost:3000';

    function loadPeople() {
      $.get(`${API_BASE}/list`, function(data) {
        $('#peopleTable').empty();
        data.forEach(person => {
          $('#peopleTable').append(`<tr><td>${person.firstName}</td><td>${person.age}</td></tr>`);
        });
      });
    }

    $('#addBtn').click(function() {
      const firstName = $('#firstName').val().trim();
      const age = $('#age').val().trim();
      if (!firstName || !age) {
        alert('Please enter both name and age.');
        return;
      }

      $.ajax({
        url: `${API_BASE}/add`, // ðŸ‘ˆ send to backend port 3000
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ firstName, age }),
        success: function() {
          $('#firstName').val('');
          $('#age').val('');
          loadPeople();
        }
      });
    });

    $(document).ready(loadPeople);
  </script>
</body>
</html>
